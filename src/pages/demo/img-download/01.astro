---
import LayoutDemo from '@/layouts/LayoutDemo.astro';

const images = [
  { src: '01.png', loading: 'lazy' },
  { src: '02.png', loading: 'lazy' },
  { src: '03.png', loading: 'lazy' },
  { src: '04.png', loading: 'lazy' },
  { src: '05.png', loading: 'lazy' },
  { src: '06.png', loading: 'lazy' },
  { src: '07.png', loading: 'lazy' },
  { src: '08.png', loading: 'lazy' },
  { src: '09.png', loading: 'lazy' },
  { src: '10.png', loading: 'lazy' },
  { src: '11.png', loading: 'lazy' },
  { src: '12.png', loading: 'lazy' },
];
---

<LayoutDemo title="image download 01">
  <div class="wrapper">
    <h1><a href="/demo/">demo</a> &raquo; image download 01</h1>

    <h2>img loading="lazy"</h2>

    <ul class="images">
      {
        images.map((image) => (
          <li class="item">
            <p class="info" set:html={`${image.src}<br />loading="${image.loading}"`} />
            <img
              src={`/images/${image.src}`}
              alt=""
              width="1200"
              height="800"
              loading={image.loading as 'lazy' | 'eager' | undefined}
            />
          </li>
        ))
      }
    </ul>
  </div>
</LayoutDemo>

<script>
  const images = document.querySelectorAll('.images img');
  const randomIndex = Math.floor(Math.random() * images.length);
  images[randomIndex].classList.add('-show');
</script>

<style>
  .wrapper {
    margin: 2rem;
  }

  .images {
    position: relative;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 40px 20px;
    padding-left: 0;

    img {
      display: none;
      width: 100%;
      height: auto;

      &.-show {
        display: block;
      }
    }
  }

  .item {
    font-size: 0;

    .info {
      font-size: 0.6rem;
    }
  }
</style>

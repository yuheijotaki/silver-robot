---
title: Astro(SSG)のビルドはどのサーバーが早いのか
description: Cloudflare, Vercel, Netlify, AWS Amplify(Hosting) にてAstroのビルド時間を計測してみたメモです。
pubDate: 2024-04-22T00:00:00.000Z
---

## 概要

Cloudflare, Vercel, Netlify, AWS Amplify(Hosting) にてAstroのビルド時間を計測してみる

## 結論

Amplify 以外は早い

## 検証内容

- [Portfolio | Astro](https://astro.build/themes/details/portfolio/) テーマを拝借して初期ファイルをビルドする。
  - インデックスページ、固定ページ、Content Collectionsでの投稿など比較的ライトめのボリューム
  - ローカル環境では5秒くらいでビルドが完了する
- 各サーバー上で5回計測する

## 結果

### Cloudflare

![](/images/2024042201_astro-build-speed_cloudflare.png)

平均：29.8s

```
1回目：28s
2回目：29s
3回目：36s
4回目：27s
5回目：29s
```

### Vercel

![](/images/2024042201_astro-build-speed_vercel.png)

平均：20.8s

```
1回目：17s
2回目：20s
3回目：21s
4回目：24s
5回目：22s
```

### Netlify

![](/images/2024042201_astro-build-speed_netlify.png)

平均：22s

```
1回目：27s
2回目：20s
3回目：20s
4回目：20s
5回目：23s
```

### AWS Amplify

![](/images/2024042201_astro-build-speed_amplify.png)

平均：79.4s

```
1回目：77s
2回目：76s
3回目：85s
4回目：79s
5回目：80s
```

## Amplifyのビルドはなぜ早くないのか

構築イメージ(Amazon Linux:2023)以外を選択、Node.jsのバージョン変更してもビルド時間は変わらず。

- デフォルトのDockerイメージが汎用的に作られているためカスタムイメージ作ればいけるかも
  - [Amplifyのデプロイを高速化する試行錯誤(nodejs, react)](https://zenn.dev/2357gi/scraps/78b6f921fc652d)
- CloudFrontディストリビューションへの伝播がそもそもVercelなどと違う仕組み？構成？のため
  - [Very slow build time to a NextJS app with only 2 pages with SSR · Issue #2127 · aws-amplify/amplify-hosting](https://github.com/aws-amplify/amplify-hosting/issues/2127)

公式のissuesで結構避難が強そうな感じに受け取ったが、まあまあ前からある問題で根深そうだなと思った。

## まとめ

- Amplify 以外は早い
- Netlify は久しぶりに触ったが頑張っていそう

## ほか参考資料

- [フロントエンドエンジニアに捧げるAWS Amplify Console | DevelopersIO](https://dev.classmethod.jp/articles/aws-amplify-console-guide-lines-for-frontend-engineer/)
- [AWS Amplify hostingを利用したNext.jsのSSG #Next.js - Qiita](https://qiita.com/ssugimoto/items/f8d7d3a293dcf66890e5)
